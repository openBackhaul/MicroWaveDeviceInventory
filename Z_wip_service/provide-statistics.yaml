  /v1/provide-cache-quality-statistics:
    parameters:
      - $ref: '#/components/parameters/user'
      - $ref: '#/components/parameters/originator'
      - $ref: '#/components/parameters/x-correlator'
      - $ref: '#/components/parameters/trace-indicator'
      - $ref: '#/components/parameters/customer-journey'
    post:
      operationId: provideCacheQualityStatistics
      summary: 'Provides quality statistics for the cache'
      tags:
        - IndividualServices
      security:
        - apiKeyAuth: []
      requestBody:
        required: optional
        description: 'If no requestBody is provided, the service returns all found records'
        content:
          application/json:
            schema:
              type: object
              description: 'Data to be returned can optionally be filtered according to a provided date and also optionally be grouped'
              properties:
                date:
                  type: object
                  required:
                    - value
                    - option
                  properties:
                    value:
                      type: string
                      pattern: 'YYYY-MM-DD'
                    option:
                      type: string
                      enum:
                        - 'date'
                        - 'date-since'
                    description: 'If the optional date filter is provided, data is filtered to return either only data found for the given date (option date) or all data since the given date (option data-since)'
                group-by:
                  type: string
                  enum:
                    - 'day'
                    - 'device-type'
                    - 'vendor'
                  description: 'If provided, the (date-filtered) data is grouped according to either of available options'
      responses:
        '200':
          description: 'Cache quality statistics provided'
          content:
            application/json:
              schema:
                one-of:
                  - description: 'statistics per device'
                    type: object
                    required:
                      - cache-quality-statistics
                    properties:
                      cache-quality-statistics:
                        type: array
                        items:
                          type: object
                          required:
                            - mount-name
                            - timestamp
                            - attribute-mismatches
                            - missing-classes
                            - weighted-score
                          properties:
                            mount-name:
                              type: string
                              description: 'The device for which statistics are returned'
                            timestamp:
                              type: string
                              description: 'The timestamp for when the statistics were gathered'
                            attribute-mismatches:
                              type: integer
                              description: 'The number of attribute mismatches'
                            missing-classes:
                              type: integer
                              description: 'The number of classes existing only in either cache or live'
                            weighted-score:
                              type: integer
                              description: 'The score computed from the found differences'
                          example:
                            - mount-name: '100250001'
                              timestamp: '2025-04-21T12:03:45Z'
                              attribute-mismatches: 18
                              missing-classes: 2
                              weighted-score: 31
                  - description: 'statistics per vendor'
                    type: object
                    required:
                      - vendor
                      - cache-quality-statistics
                    properties:
                      


          headers:
            x-correlator:
              $ref: '#/components/headers/x-correlator'
            exec-time:
              $ref: '#/components/headers/exec-time'
            backend-time:
              $ref: '#/components/headers/backend-time'
            life-cycle-state:
              $ref: '#/components/headers/life-cycle-state'
              description: >
                'Life cycle state of the consumed service
                find in [/core-model-1-4:control-construct/logical-termination-point=mwdi-1-3-0-op-s-is-019/layer-protocol=0/operation-server-interface-1-0:operation-server-interface-pac/operation-server-interface-configuration/life-cycle-state]'
        '400':
          $ref: '#/components/responses/responseForErroredServiceRequests'
        '401':
          $ref: '#/components/responses/responseForErroredServiceRequests'
        '403':
          $ref: '#/components/responses/responseForErroredServiceRequests'
        '404':
          $ref: '#/components/responses/responseForErroredServiceRequests'
        '500':
          $ref: '#/components/responses/responseForErroredServiceRequests'
        default:
          $ref: '#/components/responses/responseForErroredServiceRequests'





                  device-status-metadata:
                    type: array
                    items:
                      required:
                        - mount-name
                        - connection-status
                        - changed-to-disconnected-time
                        - added-to-device-list-time
                        - last-complete-control-construct-update-time
                        - last-control-construct-notification-update-time
                        - number-of-partial-updates-since-last-complete-update
                        - schema-cache-directory
                        - device-type
                      properties:
                        mount-name:
                          type: string
                          description: >
                            'Identifier of the device at the Controller'
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/mount-name}'
                        connection-status:
                          type: string
                          enum:
                            - 'connected'
                            - 'connecting'
                            - 'unable-to-connect'
                          description: >
                            'The connection-status of the device at the Controller
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/connection-status}'
                        changed-to-disconnected-time:
                          type: string
                          description: >
                            'Timestamp for the last time the device connection-status changed from connected into connecting or unable-to-connect
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/changed-to-disconnected-time}'
                        added-to-device-list-time:
                          type: string
                          description: >
                            'Timestamp of the time, the device was added to the deviceList
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/added-to-device-list-time}'
                        last-complete-control-construct-update-time:
                          type: string
                          description: >
                            'Timestamp of the last time, when the controlConstruct was updated completely by the periodic retrieval
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/last-complete-control-construct-update-time}'
                        last-control-construct-notification-update-time:
                          type: string
                          description: >
                            'Timestamp of the last time, when the controlConstruct was updated due a received notification
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/last-control-construct-notification-update-time}'
                        number-of-partial-updates-since-last-complete-update:
                          type: integer
                          description: >
                            'Number of controlConstruct updates for this device due to received notifications since the last complete update
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/number-of-partial-updates-since-last-complete-update}'
                        schema-cache-directory:
                          type: string
                          description: >
                            'The schema cache directy specified at the Controller, which indicates the vendor and for a subset of devices also the device type
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/schema-cache-directory}'
                        device-type:
                          type: string
                          description: >
                            'The device-type derived from air-interface information via regex mappings, default value is unknown
                            from {$RequestForDeviceStatusMetadataCausesReadingFromElasticSearch.response.body#/device-type}'
              example:
                device-status-metadata:
                  - mount-name: '305251234'
                    connection-status: 'connected'
                    changed-to-disconnected-time: ''
                    added-to-device-list-time: '2024-10-10T14:00:00+01:00'
                    last-complete-control-construct-update-time: '2024-10-10T14:00:05+01:00'
                    last-control-construct-notification-update-time: '2024-10-10T15:17:00+01:00'
                    number-of-partial-updates-since-last-complete-update: 7
                    schema-cache-directory: 'hua'
                    device-type: 'RTN950'



      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - description: 'Mount-name list filter'
                  type: object
                  properties:
                    mount-name-list:
                      type: array
                      items:
                        type: string
                      description: 'List of names of devices for which the status metadata shall be provided.'
                  example:
                    mount-name-list:
                      - '305251234'
                      - '105258888'
                - description: 'Timestamp filter on last-complete-control-construct-update-time'
                  type: object
                  property:
                    timestamp-filter:
                    type: string
                    enum:
                      - 'oldest-or-null'
                      - 'oldest'
                    description: 'Filter for the device with either oldest-or-null or oldest (non-null) timestamp value (for connected devices only). Resulting list will not contain more than a single device.'